# Discipline - Cat Food Bowl Guardian Configuration

# Cat definitions
cats:
  abbi:
    name: "Abbi"
    allowed_bowl: "abbi"
  ilana:
    name: "Ilana"
    allowed_bowl: "ilana"

# Bowl positions in camera frame (pixels)
# These will be calibrated using the calibration script
bowls:
  abbi:
    x: 200
    y: 300
    radius: 100  # Detection zone radius
  ilana:
    x: 500
    y: 300
    radius: 100

# Camera settings
camera:
  resolution:
    width: 1280
    height: 720
  framerate: 30
  rotation: 0  # 0, 90, 180, or 270 degrees

# Cat detection settings
detection:
  confidence_threshold: 0.5  # Minimum confidence for cat detection
  model: "yolov8n.pt"  # YOLOv8 nano model (fast)

# Cat identification settings
identification:
  model_path: "models/cat_classifier.pkl"
  confidence_threshold: 0.7  # Minimum confidence to identify specific cat

# Spray settings
spray:
  gpio_pin: 17  # BCM pin number for relay control
  duration_ms: 500  # Spray duration in milliseconds
  cooldown_s: 10  # Minimum seconds between sprays
  enabled: true  # Set to false to disable spraying (test mode)

# Sound deterrent settings
sound:
  file: "sounds/deterrent.wav"  # Path to sound file (MP3 or WAV)
  volume: 0.7  # Volume level (0.0 to 1.0)
  duration_ms: 2000  # Maximum playback duration in milliseconds
  cooldown_s: 5  # Minimum seconds between plays
  enabled: true  # Set to true to enable sound deterrent

# Web admin interface
web:
  enabled: true  # Set to true to enable web interface
  host: "0.0.0.0"  # Host to bind to (0.0.0.0 for all interfaces)
  port: 5000  # Port number for web interface

# Bowl monitoring logic
monitoring:
  # How long a cat must be at a bowl to be considered "eating"
  eating_threshold_s: 2.0
  # How long after a cat leaves before their bowl is "available"
  leave_threshold_s: 5.0
  # Distance from bowl center to be considered "at bowl" (pixels)
  proximity_threshold: 150

# Logging settings
logging:
  level: "INFO"
  file: "logs/discipline.log"
  max_size_mb: 10
  backup_count: 5

# Labeling settings - auto-capture cat images for training data
labeling:
  enabled: true
  capture_interval_s: 1.0  # Minimum time between captures
  max_unlabeled: 500  # Maximum unlabeled images to keep
  min_detection_confidence: 0.6  # Minimum detection confidence to capture

# Debug settings
debug:
  show_video: false  # Display video window (requires display)
  save_detections: false  # Save images of detections
  detections_dir: "logs/detections"
